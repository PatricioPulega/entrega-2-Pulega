<h2>ğŸ›ï¸ Productos disponibles</h2>

<div class="product-grid">
  {{#each products}}
    <div class="product-card">
      <img src="{{this.thumbnail}}" alt="{{this.title}}" />
      <h3>{{this.title}}</h3>
      <p><em>{{this.description}}</em></p>
      <p><strong>Precio:</strong> ${{this.price}}</p>
      <p><strong>CÃ³digo:</strong> {{this.code}}</p>
      <p><strong>Stock:</strong> {{this.stock}}</p>
      <p><strong>ID:</strong> {{this.id}}</p>
      <button class="delete-btn" data-id="{{this.id}}">ğŸ—‘ï¸ Eliminar</button>
    </div>
  {{/each}}
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const deleteButtons = document.querySelectorAll(".delete-btn");

    deleteButtons.forEach(button => {
      button.addEventListener("click", async () => {
        const id = button.getAttribute("data-id");
        if (confirm("Â¿Eliminar este producto?")) {
          try {
            const response = await fetch(`/api/products/${id}`, {
              method: "DELETE"
            });
            const result = await response.json();
            alert(result.message);
            location.reload(); // Recarga la vista para reflejar el cambio
          } catch (error) {
            alert("Error al eliminar el producto");
          }
        }
      });
    });
  });
</script>
